<html>
  <head>
    <title>Cooperativa Tech</title>
    <link rel="stylesheet" type="text/css" href="./index.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Exo+2:200,400,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="index.css" />
  </head>

  <body>
    <object
      id="alien-ship"
      class="alien-ship"
      data="./alien_ship.svg"
      type="image/svg+xml"
    >
      <img src="./alien_ship.svg" />
    </object>
    <canvas id="background-noise"></canvas>
    <div class="centered">
      <div class="hero">
        <img class="hero-img" src="./logo.svg" alt="Coopeartiva's logo" />
        <h1 class="hero-title">Cooperativa.tech</h1>
      </div>
      <p class="lead">
        Weâ€™re a group of tech professionals who gather to build cool, exciting
        stuff.
      </p>
      <p class="lead">
        <button class="link" onclick="queresFazTu()">
          Perhaps you have an awesome idea to share?
        </button>
      </p>
      <ul class="gallery">
        <li class="gallery-item">
          <a href="/jorge_gps.html" class="gallery-item-content text-only-item"
            ><div class="gallery-item-label">Jorge GPS</div></a
          >
        </li>
        <li class="gallery-item">
          <a class="gallery-item-content text-only-item" href="/soundmachine"
            ><div class="gallery-item-label">Sound Machine</div></a
          >
        </li>
        <li class="gallery-item">
          <div class="gallery-item-content">
            <iframe
              src="https://www.youtube.com/embed/l7qs_nfLMSc?t=18s&controls=0&showinfo=0&rel=0&autoplay=1&loop=1&playlist=Ssat5jtXHoo"
              frameborder="0"
              allowfullscreen
            ></iframe>
          </div>
        </li>
      </ul>
    </div>

    <script>
      function queresFazTu() {
        alert("QUERES FAZ TU!");
      }
    </script>
    <script>
      window.addEventListener("load", function() {
        let timer;
        const $ship = document.getElementById("alien-ship");

        $ship.style.top =
          document.getElementsByClassName("gallery-item")[0].offsetTop -
          50 +
          "px";

        setTimeout(() => {
          $ship.style.transition = "all 2s ease-in-out";
          Array.from(document.getElementsByClassName("gallery-item")).map(
            $item => {
              $item.addEventListener("mouseenter", event =>
                hoverShip(event.target)
              );

              $item.addEventListener("mouseleave", event => {
                if (timer) clearTimeout(timer);
                timer = setTimeout(() => {
                  $ship.style.transform = null;
                }, 5000);
              });
            }
          );

          function hoverShip($el) {
            if (timer) clearTimeout(timer);
            const rect = $el.getBoundingClientRect();
            $ship.style.transform = `translate(${rect.left + 220}px)`;
          }
        }, 100);
      });
    </script>
    <script>
      const maxOpacity = 0.6;
      const canvas = document.getElementById("background-noise");
      const ctx = canvas.getContext("2d");
      let x;
      let y;
      let number;
      let currentOpacity;

      canvas.width = window.innerWidth;
      canvas.height = 800;

      const state = new Array(canvas.width);

      for (x = 0; x < canvas.width; x++) {
        state[x] = new Array(canvas.height);

        for (y = 0; y < canvas.height; y += 1) {
          if (Math.random() * 10 < 9.2) {
            state[x][y] = false;
          } else {
            number = Math.floor(Math.random() * 100) + 150;
            currentOpacity = ((canvas.height - y) / canvas.height) * maxOpacity;
            state[x][y] = `rgba(${number},${number},255,${currentOpacity})`;
          }
        }
      }

      function redraw() {
        ctx.fillStyle = "rgba(0,0,0,1)";
        ctx.fillRect(x, y, canvas.width, canvas.height);

        for (x = 0; x < canvas.width; x += 1) {
          for (y = 0; y < canvas.height; y += 1) {
            if (state[x][y]) {
              ctx.fillStyle = state[x][y];
              ctx.fillRect(x, y, 1, 1);
            }
          }
        }
      }

      window.requestAnimationFrame(redraw);

      canvas.style.position = "fixed";
      canvas.style.top = 0;
      canvas.style.left = 0;
    </script>
  </body>
</html>
