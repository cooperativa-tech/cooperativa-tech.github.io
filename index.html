<html>
  <head>
    <title>Cooperativa Tech</title>
    <link rel="stylesheet" type="text/css" href="./index.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Exo+2:200,400,700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="index.css" />
  </head>

  <body>
    <svg
      id="alien-ship"
      width="249"
      height="260"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M154.562 12c0 4.4183-14.68 1.5-34.562 1.5-19.882 0-37.4385 2.9183-37.4385-1.5 0-4.41828 16.5562-12 36.4385-12 19.882 0 35.562 7.58172 35.562 12z"
        fill="#fff"
      />
      <g class="ship-bottom">
        <path
          d="M179 16.5c0 3.5899-26.415 7-59 7-32.5848 0-59-3.4101-59-7 0-3.5898 26.4152-4 59-4 32.585 0 59 .4102 59 4z"
          fill="url(#paint0_linear)"
        />
        <path
          d="M161.5 19c0 2.8095-16.319 5-42 5-25.6812 0-41-2.1905-41-5 0-2.8094 14.8188-2.5 40.5-2.5 25.681 0 42.5-.3094 42.5 2.5z"
          fill="#DFDFDF"
        />
      </g>
      <g
        class="ship-light invisible"
        style="mix-blend-mode:color"
        filter="url(#filter0_f)"
      >
        <path
          d="M92.9286 20h53.9344L235 246H14L92.9286 20z"
          fill="url(#paint1_linear)"
        />
      </g>
      <path
        class="ship-light invisible"
        d="M92.9286 20h53.9344L235 246H14L92.9286 20z"
        fill="url(#paint2_linear)"
        fill-opacity=".35"
      />
      <defs>
        <linearGradient
          id="paint0_linear"
          x1="120"
          y1="10"
          x2="120"
          y2="23"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#E7E7E7" />
          <stop offset="1" stop-color="#fff" />
        </linearGradient>
        <linearGradient
          id="paint1_linear"
          x1="124.5"
          y1="20"
          x2="124.5"
          y2="246"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#FAFF00" stop-opacity=".76" />
          <stop offset="1" stop-color="#BABE00" stop-opacity="0" />
        </linearGradient>
        <linearGradient
          id="paint2_linear"
          x1="124.5"
          y1="20"
          x2="124.5"
          y2="246"
          gradientUnits="userSpaceOnUse"
        >
          <stop stop-color="#FCFF74" stop-opacity=".76" />
          <stop offset="1" stop-color="#BABE00" stop-opacity="0" />
        </linearGradient>
        <filter
          id="filter0_f"
          x="0"
          y="6"
          width="249"
          height="254"
          filterUnits="userSpaceOnUse"
          color-interpolation-filters="sRGB"
        >
          <feFlood flood-opacity="0" result="BackgroundImageFix" />
          <feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape" />
          <feGaussianBlur stdDeviation="7" result="effect1_foregroundBlur" />
        </filter>
      </defs>
    </svg>

    <canvas id="background-noise"></canvas>
    <div class="centered">
      <div class="hero">
        <img class="hero-img" src="./logo.svg" alt="Coopeartiva's logo" />
        <h1 class="hero-title">Cooperativa.tech</h1>
      </div>
      <p class="lead">
        Weâ€™re a group of tech professionals who gather to build cool, exciting
        stuff.
      </p>
      <p class="lead">
        <button class="link" onclick="queresFazTu()">
          Perhaps you have an awesome idea to share?
        </button>
      </p>
      <ul class="gallery">
        <li class="gallery-item">
          <a href="/jorge_gps.html" class="gallery-item-content text-only-item"
            ><div class="gallery-item-label">Jorge GPS</div></a
          >
        </li>
        <li class="gallery-item">
          <a class="gallery-item-content text-only-item" href="/soundmachine"
            ><div class="gallery-item-label">Sound Machine</div></a
          >
        </li>
        <li class="gallery-item">
          <div class="gallery-item-content">
            <iframe
              src="https://www.youtube.com/embed/l7qs_nfLMSc?t=18s&controls=0&showinfo=0&rel=0&autoplay=1&loop=1&playlist=Ssat5jtXHoo"
              frameborder="0"
              allowfullscreen
            ></iframe>
          </div>
        </li>
      </ul>
    </div>

    <script>
      function queresFazTu() {
        alert("QUERES FAZ TU!");
      }
    </script>
    <script>
      window.addEventListener("load", function() {
        const $ship = document.getElementById("alien-ship");
        const $shipLight = $ship.querySelector(".ship-light");
        let timer;
        let lightsTimer;
        let moveTimer;

        $ship.style.transition = "all 2s ease-in-out";
        $ship.style.top =
          document.getElementsByClassName("gallery-item")[0].offsetTop -
          50 +
          "px";

        Array.from(document.getElementsByClassName("gallery-item")).map(
          $item => {
            $item.addEventListener("mouseenter", event => {
              if (timer) clearTimeout(timer);
              hoverShip(event.target);
            });

            $item.addEventListener("mouseleave", event => {
              if (timer) clearTimeout(timer);
              timer = setTimeout(() => {
                hideShip();
              }, 5000);
            });
          }
        );

        function hideShip() {
          clearTimeout(moveTimer);
          clearTimeout(lightsTimer);
          $ship.querySelector(".ship-light").classList.add("invisible");
          moveTimer = setTimeout(() => {
            $ship.style.transform = null;
          }, 500);
        }

        async function hoverShip($el) {
          clearTimeout(lightsTimer);

          const rect = $el.getBoundingClientRect();

          if (!$shipLight.classList.contains("invisible")) {
            $shipLight.classList.add("invisible");
            setTimeout(() => {
              moveShip(rect.left);
              lightsTimer = setTimeout(() => {
                hideLights();
              }, 2100);
            }, 500);
          } else {
            moveShip(rect.left);
            lightsTimer = setTimeout(() => {
              hideLights();
            }, 2100);
          }
        }

        function moveShip(left) {
          clearTimeout(moveTimer);
          moveTimer = setTimeout(() => {
            $ship.style.transform = `translate(${left + 220}px)`;
          }, 100);
        }

        function hideLights() {
          $shipLight.classList.remove("invisible");
        }
      });
    </script>
    <script>
      const maxOpacity = 0.7;
      const canvas = document.getElementById("background-noise");
      const ctx = canvas.getContext("2d");
      let x;
      let y;
      let number;
      let currentOpacity;

      canvas.width = window.innerWidth;
      canvas.height = 800;

      const state = new Array(canvas.width);

      for (x = 0; x < canvas.width; x++) {
        state[x] = new Array(canvas.height);

        for (y = 0; y < canvas.height; y += 1) {
          if (Math.random() * 10 < 9.2) {
            state[x][y] = false;
          } else {
            number = Math.floor(Math.random() * 100) + 150;
            currentOpacity = ((canvas.height - y) / canvas.height) * maxOpacity;
            state[x][y] = `rgba(${number},${number},255,${currentOpacity})`;
          }
        }
      }

      function redraw() {
        ctx.fillStyle = "rgba(0,0,0,1)";
        ctx.fillRect(x, y, canvas.width, canvas.height);

        for (x = 0; x < canvas.width; x += 1) {
          for (y = 0; y < canvas.height; y += 1) {
            if (state[x][y]) {
              ctx.fillStyle = state[x][y];
              ctx.fillRect(x, y, 1, 1);
            }
          }
        }
      }

      window.requestAnimationFrame(redraw);

      canvas.style.position = "fixed";
      canvas.style.top = 0;
      canvas.style.left = 0;
    </script>
  </body>
</html>
